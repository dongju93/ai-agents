# CrewAI Content Pipeline

CrewAI의 새로운 `flow` 기능을 사용하여 주어진 주제에 대한 콘텐츠(트윗, 블로그, 링크드인 게시물)를 자동으로 생성하는 파이프라인 프로젝트입니다.

## 📋 핵심 기능

- **다양한 콘텐츠 유형 생성**: 사용자가 지정한 주제에 따라 트윗, 블로그, 링크드인 게시물 등 다양한 형태의 콘텐츠를 생성합니다.
- **자동화된 리서치**: 콘텐츠 생성에 앞서, 관련 주제에 대한 최신 정보를 자동으로 리서치하여 내용의 깊이를 더합니다.
- **플랫폼별 최적화**: 생성되는 콘텐츠의 유형에 따라 SEO(블로그) 또는 바이럴(소셜 미디어) 가능성을 분석하고 최적화합니다.
- **유연한 워크플로우**: CrewAI의 `flow`를 기반으로 구축되어, 각 단계를 쉽게 추가하거나 수정할 수 있는 유연한 파이프라인 구조를 가집니다.

## 🤖 워크플로우

본 프로젝트는 CrewAI의 `flow`를 사용하여 콘텐츠 생성 과정을 체계적으로 관리합니다. 전체 워크플로우는 `main.py`의 `ContentPipelineFlow` 클래스에 정의되어 있으며, `crewai_flow.html` 파일을 통해 시각적으로 확인할 수 있습니다.

흐름은 다음과 같이 진행됩니다.

1.  **파이프라인 초기화 (`init_content_pipeline`)**: 사용자가 입력한 `topic`과 `content_type`의 유효성을 검사하고, 콘텐츠 유형에 맞는 최대 글자 수를 설정합니다.
2.  **리서치 수행 (`conduct_research`)**: 지정된 주제에 대한 정보 수집을 시작합니다.
3.  **콘텐츠 생성 라우팅 (`route_content_creation`)**: `content_type`에 따라 트윗, 블로그, 링크드인 중 어떤 콘텐츠를 생성할지 결정하고 작업을 분기합니다.
4.  **콘텐츠 초안 작성 (`handle_create_*`)**: 각 유형에 맞는 콘텐츠 초안을 생성합니다.
5.  **플랫폼별 최적화 (`check_seo` / `check_viral`)**:
    - 블로그의 경우, SEO 전문가가 검색 엔진 최적화를 수행합니다 (`check_seo`).
    - 트윗과 링크드인의 경우, 소셜 미디어 분석가가 바이럴 가능성을 검토합니다 (`check_viral`).
6.  **최종 콘텐츠 생성 (`finalize_content_creation`)**: 모든 검토와 최적화가 완료된 내용을 바탕으로 최종 콘텐츠를 완성합니다.

### 태스크 실행 순서

1.  `init_content_pipeline`: 파이프라인 초기화 (입력 유효성 검사 및 최대 길이 설정)
2.  `conduct_research`: 주제에 대한 리서치 수행
3.  `route_content_creation`: 콘텐츠 유형에 따라 분기
    - **트윗/링크드인 경로:**
      1.  `handle_create_tweet` / `handle_create_linkedin`: 콘텐츠 초안 작성
      2.  `check_viral`: 바이럴 가능성 검사
    - **블로그 경로:**
      1.  `handle_create_blog`: 블로그 초안 작성
      2.  `check_seo`: SEO 최적화 검사
4.  `finalize_content_creation`: 최종 콘텐츠 생성 및 마무리

## 🛠 기술 스택 및 주요 구현

- **CrewAI (`flow`)**: 에이전트 기반의 워크플로우를 관리하고 실행하기 위한 핵심 프레임워크입니다. 특히 `flow` 기능을 사용하여 복잡한 작업 흐름을 직관적으로 설계했습니다.
- **Python**: 프로젝트의 주력 개발 언어입니다.
- **Pydantic**: `ContentPipelineState` 모델을 정의하여 파이프라인의 상태를 명확하고 안전하게 관리합니다.

### 주요 구현 내용

- **`@start`, `@listen`, `@router` 데코레이터**: CrewAI `flow`의 데코레이터를 활용하여 각 단계의 실행 조건과 흐름을 선언적으로 정의합니다.
- **`or_` 조건**: 여러 이벤트(예: 트윗 또는 링크드인 생성 완료)에 대해 동일한 후속 작업을 실행할 수 있도록 `or_` 조건을 사용합니다.
- **`Enum` / `StrEnum`**: 콘텐츠 유형(`ContentType`), 길이(`ContentLength`) 등을 열거형으로 관리하여 코드의 가독성과 안정성을 높입니다.

## 🤖 에이전트 구성

`main.py`의 워크플로우를 기반으로 다음과 같은 가상 에이전트들을 구성할 수 있습니다.

- **리서처 (Researcher)**

  - **담당 작업**: `conduct_research`
  - **목표**: 주어진 주제에 대한 심도 깊은 최신 정보를 수집하고 분석하여 콘텐츠의 기반을 마련합니다.
  - **예상 도구**: 웹 검색 도구 (e.g., Serper, Tavily)

- **콘텐츠 라이터 (Content Writer)**

  - **담당 작업**: `handle_create_tweet`, `handle_create_blog`, `handle_create_linkedin`
  - **목표**: 리서치 자료를 바탕으로 각 플랫폼의 특성과 스타일에 맞는 매력적인 콘텐츠 초안을 작성합니다.

- **SEO 전문가 (SEO Specialist)**

  - **담당 작업**: `check_seo`
  - **목표**: 블로그 게시물의 검색 엔진 노출을 극대화하기 위해 키워드 분석, 메타 태그 최적화 등 SEO 전략을 적용합니다.
  - **예상 도구**: SEO 분석 관련 도구

- **소셜 미디어 분석가 (Social Media Analyst)**

  - **담당 작업**: `check_viral`
  - **목표**: 트윗과 링크드인 게시물이 더 많은 사람들에게 도달하고 공유될 수 있도록 헤드라인, 해시태그, 이미지 등 바이럴 요소를 분석하고 개선안을 제안합니다.

- **편집장 (Editor)**
  - **담당 작업**: `finalize_content_creation`
  - **목표**: 모든 초안과 제안을 종합적으로 검토하고, 최종적으로 문법 오류 없이 완벽하게 다듬어진 콘텐츠를 발행합니다.
